<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>骗子酒馆 - 局域网</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="lobby-screen">
    <h1 class="neon-title">LIAR'S BAR</h1>
    <div class="login-box">
        <input type="text" id="username" placeholder="输入你的名字" maxlength="8">
        <button onclick="joinGame()">进入酒吧</button>
    </div>
    <div id="waiting-area" style="display:none;">
        <h3>在大厅等待中...</h3>
        <ul id="player-list"></ul>
        <div id="ai-controls" style="display:none; margin: 15px 0;">
            <label for="ai-difficulty">AI 难度：</label>
            <select id="ai-difficulty">
                <option value="easy">简单</option>
                <option value="medium" selected>中等</option>
                <option value="hard">困难</option>
            </select>
            <button onclick="addAI()" class="host-btn">添加 AI 玩家</button>
            <button onclick="removeAI()" class="host-btn">移除 AI 玩家</button>
        </div>
        <button id="start-btn" onclick="startGame()" style="display:none;" class="host-btn">我是房主，开始游戏</button>
    </div>
</div>

<div id="game-screen" style="display:none;">
    <button id="ad-btn" class="ad-button" onclick="triggerAd()" style="display:none;">广告</button>
    <div class="top-bar">
        <div>当前要求: <span id="req-card-display">?</span></div>
        <div id="game-log">等待开始...</div>
    </div>

    <div id="opponents-container"></div>

    <div class="table-center">
        <div id="table-cards-area"></div>
        <div id="last-play-info" style="opacity:0;">
            <span id="last-player-name"></span> 出了 <span id="last-card-count">0</span> 张
        </div>
        <div id="death-message" style="display:none;">
            <span id="death-player-name"></span>
            <img src="assets/blood.svg" alt="血" class="blood-icon">
            死了
        </div>
        <div id="judgment-message" style="display:none;">
            <span id="judge-name"></span>
            审判
            <img src="assets/judgment.svg" alt="审判" class="judgment-icon">
            了
            <span id="accused-name"></span>
        </div>
    </div>

        <div class="bottom-controls">
        <div class="actions">
            <button id="btn-play" onclick="submitPlay()" disabled>出牌</button>
            <button id="btn-challenge" onclick="submitChallenge()" class="btn-danger" style="display:none;">质疑 (Liar!)</button>
            <button id="btn-king-judgment" onclick="submitKingJudgment()" class="btn-king-judgment" style="display:none;">👑 王的审判</button>
            <div id="trigger-container" style="display:none;">
                <svg class="trigger-progress" width="70" height="70">
                    <circle class="progress-bg" cx="35" cy="35" r="32"></circle>
                    <circle id="progress-circle" class="progress-bar" cx="35" cy="35" r="32"></circle>
                </svg>
                <button id="trigger-btn" onclick="pullTrigger()" class="btn-trigger">🔫</button>
            </div>
            <div id="bullet-display" style="display:none;"></div>
        </div>
        <div id="my-hand" class="hand-container"></div>
    </div>

    <!-- 游戏日志面板 -->
    <div id="game-log-panel" class="minimized">
        <button id="log-toggle-btn" onclick="toggleGameLog()">📜</button>
        <div id="game-log-content"></div>
    </div>
</div>

<div id="game-over-screen" style="display:none;">
    <h1 id="winner-name"></h1>
    <button onclick="location.reload()">重新开始</button>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>
</body>
</html>